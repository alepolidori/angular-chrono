!function(a,b){function c(a,b,c){function d(d,e,f){function g(a){d.seconds=Math.floor(a/1e3%60),d.totalSeconds=Math.floor(a/1e3),d.minutes=Math.floor(a/6e4%60),d.totalMinutes=Math.floor(a/6e4),d.hours=Math.floor(a/36e5%24),d.totalHours=Math.floor(a/36e5),d.totalDays=Math.floor(a/36e5/24)}function h(a,c){if(a)return console.error(a);var e=null;return e=d.startTime?new Date(d.startTime).getTime():Date.now(),isNaN(e)?(b.error("Invalid start time specified"),void 0):(d.milliseconds=c.current-e,g(d.milliseconds),d.$digest(),void 0)}var i="<span>"+e.html()+"</span>";e.replaceWith(a(i)(d));var j=f.timerName;return j?(e.bind("$destroy",function(){c.unsubscribe(j,h)}),c.subscribe(j,h),void 0):(b.error("timer-name must be specified"),void 0)}var e=["$scope","$element","$attrs",d];return{restrict:"EA",replace:!1,scope:{startTime:"=startTime"},controller:e}}function d(a){return 0===a||a?(a=a.toString(),new Array(2-a.length+1).join("0")+a):void 0}function e(){return d}function f(a,b,c){this.timerId=null,this.name=a,this.opts=b||{interval:1e3},this.listener=c,this.current=this.started=Date.now()}function g(){this.timers={},this.listeners={}}b.module("angular-chrono",[]),b.module("angular-chrono").directive("chronoTimer",c),b.module("angular-chrono").filter("zeropad",e),f.prototype.start=function(){var a=this,b=(Date.now()-this.started)%1e3;return this.timerId=setTimeout(function(){a.listener(a.name,a),a.start()},this.opts.interval-b),this},f.prototype.stop=function(){return clearTimeout(this.timerId),this.timerId=null,this},g.prototype.addTimer=function(a,b){var c=this;return this.timers[a]=new f(a,b,function(a,b){return c.onTick(a,b)}),this},g.prototype.removeTimer=function(a){return this.timers[a]?(this.timers[a].stop(),delete this.timers[a],this):this},g.prototype.onTick=function(a,c){c.current=Date.now(),b.forEach(this.listeners[a],function(a){a(null,c)})},g.prototype.subscribe=function(a,b){return"function"!=typeof b&&(b=function(){}),this.timers[a]?(this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(b),this):(b(new Error("Timer "+a+" not found")),this)},g.prototype.unsubscribe=function(a,c){if(!this.listeners[a])return this;var d=-1;return b.forEach(this.listeners[a],function(a,b){a===c&&(d=b)}),-1!==d&&this.listeners[a].splice(d,1),this},g.prototype.start=function(a){return a?(this.timers[a]&&this.timers[a].start(),void 0):(b.forEach(this.timers,function(a){a.start()}),this)},g.prototype.stop=function(a){return a?(this.timers[a]&&this.timers[a].stop(),void 0):(b.forEach(this.timers,function(a){a.stop()}),this)},b.module("angular-chrono").service("chronoService",[g])}(window,angular);